function normalize(t,s,e){return(t-s)/(e-s)}function denormalize(t,s,e){return t*(e-s)+s}function getRandomFloat(t,s){return Math.random()*(s-t)+t}function getRandomInt(t,s){return Math.floor(Math.random()*(s-t+1)+t)}class CursorSparkler{static modes={follow:"follow",trail:"trail"};static TranslateZero="translate3d(0, 0, 0)";constructor(t){(t=t||{}).mode=t.mode||CursorSparkler.modes.trail,t.numSparkles=t.numSparkles||20,t.sparkleFactor=1,t.sparkleDurationRange=[50,500],t.sparkleDistanceRange=[40,100],t.sparkleSizeRange=[1,5],this.options=t,this.el=document.createElement("div"),this.el.style.position="absolute",this.el.style.top=-this.options.sparkleSizeRange[1]+"px",this.el.style.left=-this.options.sparkleSizeRange[1]+"px",this.el.style.zIndex="10000",this.el.style.pointerEvents="none",this.el.style.width="1px",this.el.style.height="1px",this.shouldAnimate=!0,this.sparkles=[],this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onAnimationFrame=this.onAnimationFrame.bind(this)}listen(){window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mouseup",this.onMouseUp),document.body.appendChild(this.el),requestAnimationFrame(this.onAnimationFrame)}destroy(){this.el.parentElement.removeChild(this.el),window.removeEventListener("mousemove",this.onMouseMove),this.shouldAnimate=!1}render(t){if(this.options.disabled)"none"!==this.el.style.display&&(this.el.style.display="none");else{"block"!==this.el.style.display&&(this.el.style.display="block"),this.options.mode===CursorSparkler.modes.follow?this.el.style.transform="translate3d("+this.x+"px, "+this.y+"px, 0)":this.el.style.transform!==CursorSparkler.TranslateZero&&(this.el.style.transform=CursorSparkler.TranslateZero);var s=this.options.numSparkles;this.sparkles.length>s&&(this.sparkles.slice(s).forEach((function(t){t.destroy()})),this.sparkles.length=s);for(var e,i=0;i<s;i++)(e=this.sparkles[i])?(e.render(t),t>=e.options.startTime+e.options.duration&&(e.destroy(),this.sparkles[i]=this.sparkle(t+100),this.el.appendChild(this.sparkles[i].el))):(this.sparkles[i]=this.sparkle(t+getRandomInt(0,800/this.options.sparkleFactor)),this.el.appendChild(this.sparkles[i].el))}}sparkle(t){var s=this.options,e=s.sparkleFactor,i=s.sparkleDurationRange,o=s.sparkleDistanceRange,r=s.sparkleSizeRange,n=s.mode===CursorSparkler.modes.trail?this.x:0,a=s.mode===CursorSparkler.modes.trail?this.y:0;return n+=s.sparkleSizeRange[1],a+=s.sparkleSizeRange[1],new Sparkle({window:this.window,startTime:t,startX:n,startY:a,duration:getRandomInt(i[0],i[1]/e),distance:getRandomInt(o[0],o[1]*(1===e?1:e/4)),size:getRandomInt(r[0],r[1]*(1===e?1:e/3))})}onMouseMove(t){this.x=t.pageX,this.y=t.pageY}onMouseDown(t){this.originalSparkleFactor?this.options.sparkleFactor=this.originalSparkleFactor:this.originalSparkleFactor=this.options.sparkleFactor,this.options.sparkleFactor*=4}onMouseUp(t){this.options.sparkleFactor=this.originalSparkleFactor||1,delete this.originalSparkleFactor}onAnimationFrame(t){this.shouldAnimate&&(this.start||(this.start=t),this.render(t),requestAnimationFrame(this.onAnimationFrame))}}class Sparkle{static fantasticColors=["yellow","pink","red","orange","purple","cyan"];constructor(t){(t=t||{}).duration=t.duration||getRandomInt(50,500),t.direction=t.direction||getRandomFloat(0,2*Math.PI),t.distance=t.distance||getRandomInt(40,100),t.size=t.size||getRandomInt(1,5),t.color=t.color||Sparkle.getFantasticColor(),t.startTime=t.startTime||0,this.options=t,this.el=document.createElement("div"),this.el.style.position="absolute",this.el.style.background=this.options.color,this.el.style.width=this.options.size+"px",this.el.style.height=this.options.size+"px",this.el.style.borderRadius="50%",this.el.style.transform="translate3d(0,0,0)"}static getFantasticColor(){return Sparkle.fantasticColors[~~(Sparkle.fantasticColors.length*Math.random())]}destroy(){this.el.parentElement.removeChild(this.el)}render(t){var s=normalize(t,this.options.startTime,this.options.startTime+this.options.duration),e=this.options.startX+Math.sin(this.options.direction)*this.options.distance*s,i=this.options.startY+Math.cos(this.options.direction)*this.options.distance*s;this.el.style.opacity=(1-s).toString(),this.el.style.transform="translate3d("+e+"px, "+i+"px, 0)"}}var sparkler=new CursorSparkler({mode:"trail"});function bootstrap(){sparkler.listen()}bootstrap();